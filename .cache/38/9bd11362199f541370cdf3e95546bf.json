{"id":"fcGj","dependencies":[{"name":"C:\\Users\\inaba\\Programming\\Lewd2\\.babelrc","includedInParent":true,"mtime":1545517173655},{"name":"C:\\Users\\inaba\\Programming\\Lewd2\\package.json","includedInParent":true,"mtime":1545850952595},{"name":"../../helpers/database","loc":{"line":2,"column":40},"parent":"C:\\Users\\inaba\\Programming\\Lewd2\\src\\Controllers\\user\\viewUploads.js","resolved":"C:\\Users\\inaba\\Programming\\Lewd2\\src\\helpers\\database.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.get=t;var e=r(require(\"moment\")),a=r(require(\"../../helpers/database\"));function r(e){return e&&e.__esModule?e:{default:e}}async function t(r,t){const o=await a.default.connect(),d=await o.query('SELECT filename, originalname, uploaddate, duplicate, virus, passworded, deletionkey  \\n                                           FROM \"Uploads\" \\n                                           WHERE userid = $1\\n                                           ORDER BY id ASC;',[t.locals.user.id]);await o.release(),d.rows[0]&&d.rows.forEach(a=>{a.uploaddate=(0,e.default)(a.uploaddate).format(\"LL\")}),t.render(\"user\",{menuItem:\"view-uploads\",uploads:d.rows})}","map":{"mappings":[{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":0}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":13}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":20}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":35}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":43}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":56}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":57}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":64}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":68}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":76}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":80}},{"source":"Controllers/user/viewUploads.js","original":{"line":1,"column":0},"generated":{"line":1,"column":82}},{"source":"Controllers/user/viewUploads.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"Controllers/user/viewUploads.js","original":{"line":1,"column":0},"generated":{"line":1,"column":88}},{"source":"Controllers/user/viewUploads.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"Controllers/user/viewUploads.js","original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"Controllers/user/viewUploads.js","original":{"line":2,"column":0},"generated":{"line":1,"column":109}},{"source":"Controllers/user/viewUploads.js","original":{"line":2,"column":0},"generated":{"line":1,"column":111}},{"source":"Controllers/user/viewUploads.js","original":{"line":2,"column":0},"generated":{"line":1,"column":113}},{"source":"Controllers/user/viewUploads.js","original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":148}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":157}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":159}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":162}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":169}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":172}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":174}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":185}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":187}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":188}},{"source":"Controllers/user/viewUploads.js","original":{"line":23,"column":1},"generated":{"line":1,"column":196}},{"source":"Controllers/user/viewUploads.js","original":{"line":4,"column":0},"generated":{"line":1,"column":199}},{"source":"Controllers/user/viewUploads.js","name":"get","original":{"line":4,"column":15},"generated":{"line":1,"column":214}},{"source":"Controllers/user/viewUploads.js","name":"req","original":{"line":4,"column":19},"generated":{"line":1,"column":216}},{"source":"Controllers/user/viewUploads.js","name":"res","original":{"line":4,"column":24},"generated":{"line":1,"column":218}},{"source":"Controllers/user/viewUploads.js","name":"client","original":{"line":5,"column":10},"generated":{"line":1,"column":221}},{"source":"Controllers/user/viewUploads.js","name":"client","original":{"line":5,"column":10},"generated":{"line":1,"column":227}},{"source":"Controllers/user/viewUploads.js","name":"db","original":{"line":5,"column":29},"generated":{"line":1,"column":235}},{"source":"Controllers/user/viewUploads.js","name":"connect","original":{"line":5,"column":32},"generated":{"line":1,"column":237}},{"source":"Controllers/user/viewUploads.js","name":"connect","original":{"line":5,"column":32},"generated":{"line":1,"column":245}},{"source":"Controllers/user/viewUploads.js","name":"getUploads","original":{"line":6,"column":10},"generated":{"line":1,"column":255}},{"source":"Controllers/user/viewUploads.js","name":"client","original":{"line":6,"column":29},"generated":{"line":1,"column":263}},{"source":"Controllers/user/viewUploads.js","name":"query","original":{"line":6,"column":36},"generated":{"line":1,"column":265}},{"source":"Controllers/user/viewUploads.js","original":{"line":6,"column":43},"generated":{"line":1,"column":271}},{"source":"Controllers/user/viewUploads.js","original":{"line":9,"column":62},"generated":{"line":1,"column":543}},{"source":"Controllers/user/viewUploads.js","name":"res","original":{"line":9,"column":63},"generated":{"line":1,"column":544}},{"source":"Controllers/user/viewUploads.js","name":"locals","original":{"line":9,"column":67},"generated":{"line":1,"column":546}},{"source":"Controllers/user/viewUploads.js","name":"user","original":{"line":9,"column":74},"generated":{"line":1,"column":553}},{"source":"Controllers/user/viewUploads.js","name":"id","original":{"line":9,"column":79},"generated":{"line":1,"column":558}},{"source":"Controllers/user/viewUploads.js","name":"client","original":{"line":10,"column":29},"generated":{"line":1,"column":569}},{"source":"Controllers/user/viewUploads.js","name":"release","original":{"line":10,"column":36},"generated":{"line":1,"column":571}},{"source":"Controllers/user/viewUploads.js","name":"getUploads","original":{"line":13,"column":8},"generated":{"line":1,"column":581}},{"source":"Controllers/user/viewUploads.js","name":"rows","original":{"line":13,"column":19},"generated":{"line":1,"column":583}},{"source":"Controllers/user/viewUploads.js","original":{"line":13,"column":24},"generated":{"line":1,"column":588}},{"source":"Controllers/user/viewUploads.js","name":"getUploads","original":{"line":14,"column":8},"generated":{"line":1,"column":592}},{"source":"Controllers/user/viewUploads.js","name":"rows","original":{"line":14,"column":19},"generated":{"line":1,"column":594}},{"source":"Controllers/user/viewUploads.js","name":"forEach","original":{"line":14,"column":24},"generated":{"line":1,"column":599}},{"source":"Controllers/user/viewUploads.js","name":"upload","original":{"line":14,"column":32},"generated":{"line":1,"column":607}},{"source":"Controllers/user/viewUploads.js","name":"upload","original":{"line":15,"column":12},"generated":{"line":1,"column":611}},{"source":"Controllers/user/viewUploads.js","name":"uploaddate","original":{"line":15,"column":19},"generated":{"line":1,"column":613}},{"source":"Controllers/user/viewUploads.js","original":{"line":15,"column":32},"generated":{"line":1,"column":625}},{"source":"Controllers/user/viewUploads.js","name":"upload","original":{"line":15,"column":39},"generated":{"line":1,"column":627}},{"source":"Controllers/user/viewUploads.js","name":"upload","original":{"line":15,"column":39},"generated":{"line":1,"column":629}},{"source":"Controllers/user/viewUploads.js","name":"upload","original":{"line":15,"column":39},"generated":{"line":1,"column":638}},{"source":"Controllers/user/viewUploads.js","name":"uploaddate","original":{"line":15,"column":46},"generated":{"line":1,"column":640}},{"source":"Controllers/user/viewUploads.js","name":"format","original":{"line":15,"column":58},"generated":{"line":1,"column":652}},{"source":"Controllers/user/viewUploads.js","original":{"line":15,"column":65},"generated":{"line":1,"column":659}},{"source":"Controllers/user/viewUploads.js","name":"res","original":{"line":19,"column":4},"generated":{"line":1,"column":667}},{"source":"Controllers/user/viewUploads.js","name":"render","original":{"line":19,"column":8},"generated":{"line":1,"column":669}},{"source":"Controllers/user/viewUploads.js","original":{"line":19,"column":15},"generated":{"line":1,"column":676}},{"source":"Controllers/user/viewUploads.js","original":{"line":19,"column":23},"generated":{"line":1,"column":683}},{"source":"Controllers/user/viewUploads.js","name":"menuItem","original":{"line":20,"column":8},"generated":{"line":1,"column":684}},{"source":"Controllers/user/viewUploads.js","original":{"line":20,"column":18},"generated":{"line":1,"column":693}},{"source":"Controllers/user/viewUploads.js","name":"uploads","original":{"line":21,"column":8},"generated":{"line":1,"column":708}},{"source":"Controllers/user/viewUploads.js","name":"getUploads","original":{"line":21,"column":17},"generated":{"line":1,"column":716}},{"source":"Controllers/user/viewUploads.js","name":"rows","original":{"line":21,"column":28},"generated":{"line":1,"column":718}}],"sources":{"Controllers/user/viewUploads.js":"import moment                      from \"moment\";\r\nimport db                          from \"../../helpers/database\";\r\n\r\nasync function get(req, res) {\r\n    const client     = await db.connect();\r\n    const getUploads = await client.query(`SELECT filename, originalname, uploaddate, duplicate, virus, passworded, deletionkey  \r\n                                           FROM \"Uploads\" \r\n                                           WHERE userid = $1\r\n                                           ORDER BY id ASC;`, [res.locals.user.id])\r\n                       await client.release();\r\n\r\n    // If there are dates then format them\r\n    if (getUploads.rows[0]) {\r\n        getUploads.rows.forEach(upload => {\r\n            upload.uploaddate = moment(upload.uploaddate).format(\"LL\");\r\n        });\r\n    }\r\n\r\n    res.render(\"user\", {\r\n        menuItem: \"view-uploads\",\r\n        uploads: getUploads.rows\r\n    });\r\n}\r\n\r\nexport { get }"},"lineCount":null}},"hash":"5da8c28862b153bb90863f7ff286d73e","cacheData":{"env":{}}}